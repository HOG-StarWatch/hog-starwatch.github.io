<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTMLæ··æ·†</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <div class="workspace">
        <div class="panel">
            <div class="panel-header">
                <div class="panel-title">HTML éšå½¢åŠ å¯†å™¨ (HTML Obfuscator)</div>
                <div class="panel-actions">
                     <button class="btn btn-icon" onclick="app.clear('obf')">æ¸…ç©º</button>
                </div>
            </div>
            <div style="padding: 1rem; flex: 1; display: flex; flex-direction: column; gap: 1rem;">
                <textarea id="obf-input" placeholder="è¯·åœ¨æ­¤ç²˜è´´æ‚¨çš„ HTML æºä»£ç ..." style="flex:1; border: 1px solid var(--border); border-radius: 8px; background: rgba(0,0,0,0.2);"></textarea>
                
                <div class="toolbar" style="width:100%; flex-direction:row; height:auto; overflow:visible;">
                    <button class="btn btn-primary" onclick="obfTool.encrypt('base64')">âš¡ Base64 åŠ å¯†</button>
                    <button class="btn btn-primary" onclick="obfTool.encrypt('hex')">ğŸ”¢ Hex ç¼–ç </button>
                    <button class="btn btn-primary" onclick="obfTool.encrypt('unicode')">ğŸ”£ Unicode æ··æ·†</button>
                    <button class="btn btn-primary" onclick="obfTool.encrypt('ascii')">ğŸ¤– ASCII æ•°ç»„</button>
                </div>
            </div>
        </div>

        <div class="panel">
            <div class="panel-header">
                <div class="panel-title">åŠ å¯†ç»“æœ (å¯ç›´æ¥ä¿å­˜ä¸º .html è¿è¡Œ)</div>
                <div class="panel-actions">
                    <button class="btn btn-icon btn-secondary" onclick="app.copy('obf-output')">å¤åˆ¶</button>
                </div>
            </div>
            <textarea id="obf-output" readonly placeholder="åŠ å¯†åçš„ä»£ç å°†æ˜¾ç¤ºåœ¨è¿™é‡Œï¼Œè‚‰çœ¼æ— æ³•è¯†åˆ«å†…å®¹..." style="padding: 1rem;"></textarea>
        </div>
    </div>

    <div id="toast" class="toast">æ“ä½œæˆåŠŸ</div>
    <script src="../js/app.js"></script>
    <script>
        const obfTool = {
            encrypt: function(type) {
                const code = document.getElementById('obf-input').value;
                if (!code) {
                    app.showToast('è¯·å…ˆè¾“å…¥ä»£ç ï¼', 'error');
                    return;
                }

                let script = '';
                try {
                    if (type === 'base64') {
                        const base64 = btoa(unescape(encodeURIComponent(code)));
                        script = `<script type="text/javascript">\ndocument.write(decodeURIComponent(escape(window.atob("${base64}"))));\n<\/script>`;
                    } else if (type === 'hex') {
                        let hex = '';
                        for (let i = 0; i < code.length; i++) {
                            hex += '%' + code.charCodeAt(i).toString(16).toUpperCase();
                        }
                        script = `<script type="text/javascript">\ndocument.write(unescape("${hex}"));\n<\/script>`;
                    } else if (type === 'unicode') {
                        let unicode = '';
                        for (let i = 0; i < code.length; i++) {
                            unicode += '\\u' + ('0000' + code.charCodeAt(i).toString(16)).slice(-4);
                        }
                        script = `<script type="text/javascript">\ndocument.write("${unicode}");\n<\/script>`;
                    } else if (type === 'ascii') {
                        let charCodes = [];
                        for (let i = 0; i < code.length; i++) {
                            charCodes.push(code.charCodeAt(i));
                        }
                        script = `<script type="text/javascript">\ndocument.write(String.fromCharCode(${charCodes.join(',')}));\n<\/script>`;
                    }
                    
                    document.getElementById('obf-output').value = script;
                    app.showToast('åŠ å¯†å®Œæˆï¼');
                } catch (e) {
                    app.showToast('åŠ å¯†å¤±è´¥: ' + e.message, 'error');
                }
            }
        };
    </script>
</body>
</html>