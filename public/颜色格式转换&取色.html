<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å–è‰²å™¨</title>
    <style>
        /* å¯¼å…¥Googleå­—ä½“ */
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');

        /* è®¾ç½®é¡µé¢çš„åŸºæœ¬æ ·å¼ */
        body {
            font-family: 'Roboto', sans-serif; /* ä½¿ç”¨Robotoå­—ä½“ */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f4f8; /* æ›´æŸ”å’Œçš„èƒŒæ™¯é¢œè‰² */
            transition: background-color 0.3s, color 0.3s; /* ç»Ÿä¸€è¿‡æ¸¡æ•ˆæœ */
            min-height: 100vh;
        }

        h1 {
            margin-top: 20px;
            color: #333;
        }

        /* åˆ‡æ¢æŒ‰é’®æ ·å¼ */
        #toggleButton {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }

        #toggleButton:hover {
            background-color: #45a049;
        }

        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            width: 90%;
            max-width: 1200px;
            margin: 30px 0;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            padding: 30px;
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .color-section {
            flex: 1 1 280px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .color-section h2 {
            margin-bottom: 20px;
            color: #555;
        }

        input[type="text"], input[type="color"], input[type="file"] {
            margin: 10px 0;
            padding: 10px 15px;
            width: 100%;
            max-width: 250px;
            border: 2px solid #ccc;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        input[type="text"]:focus, input[type="color"]:focus {
            border-color: #4CAF50;
            box-shadow: 0 0 5px rgba(76, 175, 80, 0.5);
            outline: none;
        }

        button {
            margin-top: 10px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s, transform 0.2s;
        }

        button:hover {
            background-color: #45a049;
            transform: translateY(-2px);
        }

        .color-display {
            width: 100%;
            max-width: 250px;
            height: 60px;
            margin: 15px 0;
            border: 2px solid #ccc;
            border-radius: 8px;
            box-shadow: inset 0 0 5px rgba(0,0,0,0.1);
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        p {
            font-size: 18px;
            color: #333;
        }

        hr {
            width: 90%;
            max-width: 1200px;
            border: none;
            border-top: 2px solid #ddd;
            margin: 30px 0;
        }

        /* å¤œé—´æ¨¡å¼æ ·å¼ */
        body.night-mode {
            background-color: #121212;
            color: #e0e0e0;
        }

        .container.night-mode {
            background-color: #1e1e1e;
            box-shadow: 0 10px 20px rgba(255, 255, 255, 0.05);
        }

        .color-section h2, p {
            color: #e0e0e0;
        }

        input.night-mode, input[type="file"].night-mode {
            border-color: #555;
            background-color: #2c2c2c;
            color: #e0e0e0;
        }

        input.night-mode:focus {
            border-color: #bb86fc;
            box-shadow: 0 0 5px rgba(187, 134, 252, 0.5);
        }

        .color-display.night-mode {
            border-color: #555;
            box-shadow: inset 0 0 5px rgba(255,255,255,0.1);
        }

        button.night-mode {
            background-color: #bb86fc;
        }

        button.night-mode:hover {
            background-color: #9b59b6;
        }

        /* å›¾ç‰‡é¢„è§ˆæ ·å¼ */
        #imagePreview {
            margin-top: 20px;
            max-width: 100%;
            height: auto;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            display: none;
            transition: transform 0.3s;
        }

        #imagePreview:hover {
            transform: scale(1.02);
        }

        /* å“åº”å¼è®¾è®¡è°ƒæ•´ */
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                align-items: center;
            }

            .color-section {
                width: 100%;
                max-width: 400px;
            }

            #toggleButton {
                position: static;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <button onclick="goHome()">è¿”å›ä¸»é¡µ</button>
    <button id="toggleButton" onclick="toggleNightMode()">ğŸŒ™ åˆ‡æ¢å¤œé—´æ¨¡å¼</button> <!-- åˆ‡æ¢æŒ‰é’® -->
    <h1>ğŸ¨ å–è‰²å™¨</h1> <!-- ä¸»æ ‡é¢˜ -->
    <div class="container"> <!-- å®¹å™¨ -->
        <div class="color-section"> <!-- HEXè½¬RGBéƒ¨åˆ† -->
            <h2>ğŸ”„ HEX è½¬ RGB</h2> <!-- å­æ ‡é¢˜ -->
            <input type="text" id="hexInput" placeholder="è¾“å…¥ HEX é¢œè‰²" onfocus="addHash(this)" /> <!-- è¾“å…¥æ¡† -->
            <button onclick="convertHexToRgb()">è½¬æ¢</button> <!-- è½¬æ¢æŒ‰é’® -->
            <div class="color-display" id="colorDisplayHex"></div> <!-- é¢œè‰²æ˜¾ç¤ºåŒºåŸŸ -->
            <p id="resultHex">RGB: -</p> <!-- ç»“æœæ–‡æœ¬ -->
        </div>
        <div class="color-section"> <!-- RGBè½¬HEXéƒ¨åˆ† -->
            <h2>ğŸ”„ RGB è½¬ HEX</h2> <!-- å­æ ‡é¢˜ -->
            <p>è¾“å…¥ RGB å€¼ (ä¾‹å¦‚ï¼Œ255, 0, 0):</p> <!-- è¯´æ˜æ–‡æœ¬ -->
            <input type="text" id="rgbInput" placeholder="è¾“å…¥ RGB é¢œè‰²" onfocus="addComma(this)" /> <!-- è¾“å…¥æ¡† -->
            <button onclick="convertRgbToHex()">è½¬æ¢</button> <!-- è½¬æ¢æŒ‰é’® -->
            <div class="color-display" id="colorDisplayRgb"></div> <!-- é¢œè‰²æ˜¾ç¤ºåŒºåŸŸ -->
            <p id="resultRgb">HEX: -</p> <!-- ç»“æœæ–‡æœ¬ -->
        </div>
        <div class="color-section"> <!-- åŠ¨æ€å–è‰²å™¨éƒ¨åˆ† -->
            <h2>ğŸ¨ åŠ¨æ€å–è‰²å™¨</h2> <!-- å­æ ‡é¢˜ -->
            <input type="color" id="colorPicker" onchange="updateColor(this.value)" /> <!-- é¢œè‰²é€‰æ‹©å™¨ -->
            <div class="color-display" id="colorDisplayPicker"></div> <!-- é¢œè‰²æ˜¾ç¤ºåŒºåŸŸ -->
            <p id="resultPicker">RGB: -</p> <!-- ç»“æœæ–‡æœ¬ -->
        </div>
    </div>
    <hr> <!-- æ°´å¹³çº¿ -->
    <h2>ğŸ–¼ï¸ å›¾ç‰‡é¢„è§ˆ</h2> <!-- å­æ ‡é¢˜ -->
    <input type="file" id="fileInput" accept="image/*" onchange="previewImage()" /> <!-- æ–‡ä»¶è¾“å…¥æ¡† -->
    <div style="text-align: center;"> <!-- å›¾ç‰‡é¢„è§ˆåŒºåŸŸ -->
        <img id="imagePreview" alt="å›¾ç‰‡é¢„è§ˆ" /> <!-- å›¾ç‰‡å…ƒç´  -->
    </div>
    <script>
        // åœ¨è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶æ·»åŠ  #
        function addHash(input) {
            if (input.value.length === 0) {
                input.value = '#'; // å¦‚æœè¾“å…¥ä¸ºç©ºï¼Œåˆ™æ·»åŠ #
            }
        }

        // åœ¨RGBè¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶æ·»åŠ åˆå§‹å€¼
        function addComma(input) {
            if (input.value.trim() === '') {
                input.value = '0, 0, 0'; // é»˜è®¤å€¼
            }
        }

        // å°†HEXé¢œè‰²è½¬æ¢ä¸ºRGBé¢œè‰²
        function convertHexToRgb() {
            let hex = document.getElementById('hexInput').value.trim();
            if (!hex.startsWith('#')) { // å¦‚æœæ²¡æœ‰#
                hex = '#' + hex; // æ·»åŠ #
            }
            const hexValue = hex.slice(1); // å»æ‰#
            if (hexValue.length !== 6 || !/^([0-9A-Fa-f]{6})$/.test(hexValue)) { // æ£€æŸ¥æ ¼å¼
                alert("æ— æ•ˆçš„ HEX é¢œè‰²æ ¼å¼");
                return; // è¿”å›
            }
            // è§£æRGBå€¼
            const r = parseInt(hexValue.slice(0, 2), 16);
            const g = parseInt(hexValue.slice(2, 4), 16);
            const b = parseInt(hexValue.slice(4, 6), 16);
            // æ˜¾ç¤ºç»“æœ
            document.getElementById('resultHex').innerText = `RGB: (${r}, ${g}, ${b})`;
            document.getElementById('colorDisplayHex').style.backgroundColor = hex; // æ›´æ–°é¢œè‰²æ˜¾ç¤ºåŒºåŸŸ
            document.getElementById('colorDisplayHex').classList.remove('night-mode');
            toggleNightModeIfNeeded('colorDisplayHex', hex);
        }

        // å°†RGBé¢œè‰²è½¬æ¢ä¸ºHEXé¢œè‰²
        function convertRgbToHex() {
            const rgbInput = document.getElementById('rgbInput').value.trim();
            const rgbValues = rgbInput.split(',').map(item => parseInt(item.trim())); // åˆ†å‰²å¹¶è½¬æ¢ä¸ºæ•°å­—
            // æ£€æŸ¥RGBå€¼æ˜¯å¦æœ‰æ•ˆ
            if (rgbValues.length !== 3 || rgbValues.some(value => isNaN(value) || value < 0 || value > 255)) {
                alert("æ— æ•ˆçš„ RGB é¢œè‰²å€¼");
                return; // è¿”å›
            }
            const [r, g, b] = rgbValues;
            const hex = `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase()}`; // è½¬æ¢ä¸ºHEX
            // æ˜¾ç¤ºç»“æœ
            document.getElementById('resultRgb').innerText = `HEX: ${hex}`;
            document.getElementById('colorDisplayRgb').style.backgroundColor = hex; // æ›´æ–°é¢œè‰²æ˜¾ç¤ºåŒºåŸŸ
            document.getElementById('colorDisplayRgb').classList.remove('night-mode');
            toggleNightModeIfNeeded('colorDisplayRgb', hex);
        }

        // æ›´æ–°åŠ¨æ€å–è‰²å™¨çš„æ˜¾ç¤ºé¢œè‰²
        function updateColor(color) {
            const hex = color.toUpperCase();
            document.getElementById('colorDisplayPicker').style.backgroundColor = hex; // æ›´æ–°æ˜¾ç¤ºåŒºåŸŸ
            // è§£æRGBå€¼
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            // æ˜¾ç¤ºRGBç»“æœ
            document.getElementById('resultPicker').innerText = `RGB: (${r}, ${g}, ${b})`;
            document.getElementById('colorDisplayPicker').classList.remove('night-mode');
            toggleNightModeIfNeeded('colorDisplayPicker', hex);
        }

        // é¢„è§ˆé€‰æ‹©çš„å›¾ç‰‡
        function previewImage() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];
            const imagePreview = document.getElementById('imagePreview');
            if (file) {
                const reader = new FileReader(); // åˆ›å»ºæ–‡ä»¶è¯»å–å™¨
                reader.onload = function(e) {
                    imagePreview.src = e.target.result; // è®¾ç½®å›¾ç‰‡æº
                    imagePreview.style.display = 'block'; // æ˜¾ç¤ºå›¾ç‰‡
                }
                reader.readAsDataURL(file); // è¯»å–æ–‡ä»¶ä¸ºData URL
            }
        }

        // åˆ‡æ¢å¤œé—´æ¨¡å¼
        function toggleNightMode() {
            const body = document.body;
            const container = document.querySelector('.container');
            const inputs = document.querySelectorAll('input');
            const colorDisplays = document.querySelectorAll('.color-display');
            const buttons = document.querySelectorAll('button');

            // åˆ‡æ¢ç±»å
            body.classList.toggle('night-mode');
            container.classList.toggle('night-mode');

            inputs.forEach(input => {
                input.classList.toggle('night-mode'); // åˆ‡æ¢è¾“å…¥æ¡†çš„å¤œé—´æ¨¡å¼æ ·å¼
            });

            colorDisplays.forEach(display => {
                display.classList.toggle('night-mode'); // åˆ‡æ¢é¢œè‰²æ˜¾ç¤ºåŒºåŸŸçš„å¤œé—´æ¨¡å¼æ ·å¼
            });

            buttons.forEach(button => {
                button.classList.toggle('night-mode'); // åˆ‡æ¢æŒ‰é’®çš„å¤œé—´æ¨¡å¼æ ·å¼
            });

            // åˆ‡æ¢å›¾æ ‡
            const toggleBtn = document.getElementById('toggleButton');
            if (body.classList.contains('night-mode')) {
                toggleBtn.innerText = 'â˜€ï¸ åˆ‡æ¢æ—¥é—´æ¨¡å¼';
            } else {
                toggleBtn.innerText = 'ğŸŒ™ åˆ‡æ¢å¤œé—´æ¨¡å¼';
            }
        }

        // æ ¹æ®å½“å‰ä¸»é¢˜è°ƒæ•´é¢œè‰²æ˜¾ç¤ºåŒºåŸŸçš„æ ·å¼
        function toggleNightModeIfNeeded(elementId, color) {
            const body = document.body;
            const element = document.getElementById(elementId);
            if (body.classList.contains('night-mode')) {
                // å¦‚æœæ˜¯å¤œé—´æ¨¡å¼ï¼Œè°ƒæ•´é¢œè‰²æ˜¾ç¤ºåŒºåŸŸçš„è¾¹æ¡†
                element.style.borderColor = '#555';
            } else {
                element.style.borderColor = '#ccc';
            }
        }

        // ç›‘å¬æ¨¡å¼åˆ‡æ¢ï¼Œè‡ªåŠ¨è°ƒæ•´å·²æœ‰é¢œè‰²æ˜¾ç¤ºåŒºåŸŸçš„æ ·å¼
        window.addEventListener('load', () => {
            const colorDisplays = document.querySelectorAll('.color-display');
            colorDisplays.forEach(display => {
                const color = display.style.backgroundColor;
                if (color) {
                    toggleNightModeIfNeeded(display.id, color);
                }
            });
        });

	// å®šä¹‰è¿”å›ä¸»é¡µå‡½æ•°
        function goHome() {
            window.location.href = "/";
        }
    </script>
</body>
</html>
